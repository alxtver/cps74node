<script src="/pki.js"></script>
<h1>ПКИ</h1>
<button class="btn btn-dark" style="margin-bottom: 1rem" onclick="location.href='/add';">Добавить ПКИ</button>
<div class="form-group">
    <label for="part_select">Партия</label>
      <select class="form-control mb-2" id="part_select">

    </select>
    <input type="text" name="search" class="form-control hoverable" id="search" placeholder="Поиск...">
  </div>


<div id="showData"></div>

<input hidden="true" id="temp" value="0"></input>

<script>
    $(document).ready(function() {
    load_data()
    load_part()
    
    $(document).on('change', '#part_select', function() {
      let search = $('#search').val()
      if (search == ''){
        search = 'null'
      }
      load_data(search, $("#part_select :selected").text())
  })
  
    
  
    $('#search').keyup(function() {
      let search = $(this).val()
      let blank_req = 'null'
      let selected = $("#part_select :selected").text()
      load_data(search, selected)
      if (search) {
        load_data(search, selected)
      } else {
        load_data(blank_req, selected)
      }
    })

  $(document).on('blur', '.type', function() {
    let id = $(this).data("id");
    let type = $(this).text();
    edit_type(id, type);
  });
  
  $(document).on('blur', '.model', function() {
    let id = $(this).data("id");
    let model = $(this).text();
    edit_model(id, model);
  });

  $(document).on('blur', '.serial_number', function() {
    let id = $(this).data("id");
    let serial_number = $(this).text();
    edit_serial_number(id, serial_number);
  });

  $(document).on('blur', '.vendor', function() {
    let id = $(this).data("id");
    let vendor = $(this).text();
    edit_vendor(id, vendor);
  });

  $(document).on('blur', '.country', function() {
    let id = $(this).data("id");
    let country = $(this).text();
    edit_country(id, country);
  });

  $(document).on('blur', '.part', function() {
    let id = $(this).data("id");
    let part = $(this).text();
    edit_part(id, part);
  });


    
  });

</script>
</body>